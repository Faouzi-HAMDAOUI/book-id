(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c8d19"],{5701:function(s,t,e){"use strict";e.r(t);var i=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("v-carousel",{attrs:{height:"700","hide-delimiters":""}},s._l(s.listBooks,(function(t,i){return e("v-carousel-item",{key:i},[e("v-row",[e("v-col",{staticClass:"mt-16 ml-16",attrs:{md:"4",sm:"4",xs:"4"}},[e("img",{staticClass:"mt-16 ml-16",attrs:{src:t.photo,height:"360px",alt:""}})]),e("v-col",{staticClass:"mt-12",attrs:{md:"7",sm:"4",xs:"4"}},[e("v-sheet",{staticClass:"black--text mr-12 mt-16",attrs:{color:"transparent"}},[e("v-row",[e("div",[e("h1",{staticClass:" mt-16"},[s._v(s._s(t.title))]),e("h3",{staticClass:" mt-2"},[s._v(s._s(t.auteur))]),t.genre[0]?e("v-chip",{staticClass:"ma-2  mt-1",attrs:{color:"deep-purple darken-1"}},[s._v(" "+s._s(t.genre[0])+" ")]):s._e(),t.genre[1]?e("v-chip",{staticClass:"ma-2  mt-1",attrs:{color:"purple darken-1"}},[s._v(" "+s._s(t.genre[1])+" ")]):s._e(),e("p",{staticClass:"mr-16  mt-12"},[s._v(" "+s._s(t.resume)+" ")]),e("p",{staticClass:"mt-6"},[e("v-icon",{staticClass:"black--text"},[s._v("mdi-map-marker")]),s._v(" "+s._s(t.ville)+" ")],1)],1)])],1)],1)],1),e("v-bottom-navigation",{staticClass:"text-center black--text transparent",attrs:{height:"110"}},[e("v-row",{staticClass:"justify-center"},[e("v-col",{attrs:{md:"2"}},[e("v-avatar",{staticClass:"mt-3 mr-10 ml-10",attrs:{size:"62",color:"orange"}},[e("v-icon",{attrs:{dark:""},on:{click:function(t){return s.deleteBook(i)}}},[s._v(" mdi-close ")])],1),e("p",[s._v("Ne m'intéresse pas")])],1),e("v-col",{attrs:{md:"2"}},[e("v-avatar",{staticClass:"mt-3",attrs:{size:"62",color:"orange"}},[e("v-icon",{attrs:{dark:""},on:{click:function(e){return s.sendMessage(t,i)}}},[s._v(" mdi-flag ")])],1),e("p",[s._v("Réserver")])],1),e("v-col",{attrs:{md:"2"}},[e("v-avatar",{staticClass:"mt-3 mr-10 ml-10",attrs:{size:"62",color:"orange"}},[t.links[0]&&t.links[0].idUser===s.myId||t.links[1]&&t.links[1].idUser===s.myId||t.links[2]&&t.links[2].idUser===s.myId||t.links[3]&&t.links[3].idUser===s.myId||t.links[4]&&t.links[4].idUser===s.myId||t.links[5]&&t.links[5].idUser===s.myId||t.links[6]&&t.links[6].idUser===s.myId||t.links[7]&&t.links[7].idUser===s.myId||t.links[8]&&t.links[8].idUser===s.myId?e("v-icon",{attrs:{dark:""},on:{click:function(e){return s.deleteLik(t.id,i)}}},[s._v(" mdi-cards-heart ")]):e("v-icon",{attrs:{dark:""},on:{click:function(e){return s.addLik(t.id,i)}}},[s._v(" mdi-cards-heart ")])],1),e("p",[s._v("Ajouter à mes favoris")])],1)],1)],1),e("v-row",{attrs:{justify:"center"}},[e("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:s.confMsg,callback:function(t){s.confMsg=t},expression:"confMsg"}},[e("v-card",{attrs:{"max-width":"500px"}},[e("v-toolbar",{attrs:{color:"light-green darken-1",dark:""}},[e("v-toolbar-title",[s._v("Confirmation")]),e("v-spacer"),e("v-btn",{attrs:{icon:""},on:{click:function(t){s.confMsg=!1}}},[e("v-icon",[s._v("mdi-close")])],1)],1),e("div",{staticClass:"text-center"},[e("h2",[s._v(s._s(s.messageConf))])])],1)],1)],1)],1)})),1)},a=[],r=(e("4160"),e("a434"),e("b0c0"),e("159b"),e("2591")),o=e("56d7"),n={data:function(){return{myLik:[],lik:{},listBooks:[],myUser:[],value:4,allMessages:[],allfavoris:[],msgg:[],idmsg:"6JfI2xqVKYWnYkSMypaJ",messageConf:"",confMsg:!1,photo:"",avis:"",title:"",auteur:"",note:"",etats:"",resume:"",nameUser:"",idUser:"",ville:"",disponible:"",myId:""}},created:function(){var s=this;r["a"].auth().onAuthStateChanged((function(t){t?(s.userAuth=t,s.myName=t.email,s.myId=t.uid):s.userAuth=null})),this.getUser(),this.getBook()},methods:{getBook:function(){var s=this;return o["db"].collection("books").get().then((function(t){t.forEach((function(t){var e=t.data();e.id=t.id,e.ville==s.myUser[0].ville&&s.listBooks.push(e)}))})),this.listBooks},getUser:function(){var s=this;return o["db"].collection("users").get().then((function(t){t.forEach((function(t){var e=t.data();e.id=t.id,e.idUser==s.myId&&s.myUser.push(e)}))})),this.myUser},deleteBook:function(s){var t=this;return this.listBooks.splice(s,1),this.messageConf="Le livre a été retiré de la liste",this.confMsg=!0,setTimeout((function(){return t.confMsg=!1}),4e3),this.listBooks},addLik:function(s,t){var e=this;this.lik={idUser:this.myId},this.myLik=this.listBooks[t].links,this.myLik.push(this.lik),o["booksRef"].doc(s).update({links:this.myLik},{merge:!0}).then((function(){console.log("Document successfully updated!")})).catch((function(s){console.error("Error updating document: ",s)})),this.messageConf="Le livre a été ajouté à vos favoris",this.confMsg=!0,setTimeout((function(){return e.confMsg=!1}),4e3),this.listBooks.splice(t,1)},deleteLik:function(s,t){var e=this;this.myLik=this.listBooks[t].links;for(var i=0,a=this.myLik.length;i<a;i++)this.myLik[i].idUser==this.myId&&this.myLik.splice(i,1);o["booksRef"].doc(s).update({links:this.myLik},{merge:!0}).then((function(){console.log("Document successfully updated!")})).catch((function(s){console.error("Error updating document: ",s)})),this.messageConf="Le livre a été retiré sur la listes de vos favoris",this.confMsg=!0,setTimeout((function(){return e.confMsg=!1}),4e3)},getMyMessages:function(){var s=this;return o["db"].collection("messages").get().then((function(t){t.forEach((function(t){var e=t.data();e.id=t.id;var i=e.msg;s.allMessages.push(i)}))})),this.allMessages},sendMessage:function(s,t){var e=this;this.date=(new Date).toISOString().substr(0,19),this.newMsg={nameEmeteur:this.myUser[0].name,nameRecepteur:s.nameUser,idEmeteur:this.myUser[0].idUser,idRecepteur:s.idUser,msg:"Bonjour, je suis intéressé par votre livre, et j'aimerais savoir si je peux l'emprunter ?",created:this.date},this.listBooks.splice(t,1),this.getMyMessages(),setTimeout((function(){e.msgg=e.allMessages[0],e.msgg.push(e.newMsg),o["msgsRef"].doc(e.idmsg).update({msg:e.msgg},{merge:!0}).then((function(){console.log("Votre message a été envoyé avec succès!")})).catch((function(s){console.error("Error lors denvois de message: ",s)}))}),1e3),this.messageConf="Votre demande a bien été prise en compte, vous serez contacté prochainement par son propriétaire !",this.confMsg=!0,setTimeout((function(){return e.confMsg=!1}),4e3)}}},c=n,l=e("2877"),d=e("6544"),m=e.n(d),u=e("8212"),h=e("b81c"),v=e("8336"),g=e("b0af"),f=e("5e66"),k=e("3e35"),p=e("cc20"),y=e("62ad"),C=e("169a"),_=e("132d"),b=e("0fd9"),M=e("8dd9"),U=e("2fa4"),I=e("71d9"),V=e("2a7f"),B=Object(l["a"])(c,i,a,!1,null,null,null);t["default"]=B.exports;m()(B,{VAvatar:u["a"],VBottomNavigation:h["a"],VBtn:v["a"],VCard:g["a"],VCarousel:f["a"],VCarouselItem:k["a"],VChip:p["a"],VCol:y["a"],VDialog:C["a"],VIcon:_["a"],VRow:b["a"],VSheet:M["a"],VSpacer:U["a"],VToolbar:I["a"],VToolbarTitle:V["a"]})}}]);
//# sourceMappingURL=chunk-2d0c8d19.c32a3add.js.map